import React from 'react';

export type MapMarkerIconKey =
  | 'character'
  | 'monster'
  | 'trap'
  | 'object'
  | 'investigation'
  | 'area';

export type MapMarkerKind = 'point' | 'area';

export interface MapMarkerIconDefinition {
  key: MapMarkerIconKey;
  label: string;
  kind: MapMarkerKind;
  defaultColor: string;
  icon: React.ReactElement;
}

const iconBaseClassName = 'h-5 w-5';

const createIcon = (viewBox: string, children: React.ReactNode) => (
  <svg viewBox={viewBox} role="img" aria-hidden="true" className={iconBaseClassName} focusable="false">
    {children}
  </svg>
);

export const mapMarkerIconDefinitions: MapMarkerIconDefinition[] = [
  {
    key: 'character',
    label: 'Character Marker',
    kind: 'point',
    defaultColor: '#facc15',
    icon: createIcon(
      '0 0 512 512',
      <>
        <path
          fill="currentColor"
          d="M458.159 404.216c-18.93-33.65-49.934-71.764-100.409-93.431c-28.868 20.196-63.938 32.087-101.745 32.087c-37.828 0-72.898-11.89-101.767-32.087c-50.474 21.667-81.479 59.782-100.398 93.431C28.731 448.848 48.417 512 91.842 512c43.426 0 164.164 0 164.164 0s120.726 0 164.153 0c43.424 0 63.11-63.152 38-107.784z"
        />
        <path
          fill="currentColor"
          d="M256.005 300.641c74.144 0 134.231-60.108 134.231-134.242v-32.158C390.236 60.108 330.149 0 256.005 0c-74.155 0-134.252 60.108-134.252 134.242V166.4c0 74.133 60.098 134.241 134.252 134.241z"
        />
      </>,
    ),
  },
  {
    key: 'monster',
    label: 'Monster Marker',
    kind: 'point',
    defaultColor: '#f97316',
    icon: createIcon(
      '0 0 512 512',
      <path
        fill="currentColor"
        d="M196.36 25.44c-45.063 17.44-69.198 37.01-86.17 86.17v70.624h-.126v9.346c0 57.256-.92 108.17-16.478 163.72l-1.324 4.73 103.545 124.32h6.238l1.715-.71c36.42-15.074 71.277-16.862 107.068-.167l6.62 3.088 102.29-126.445-1.078-4.48c-13.006-54.042-13.137-108.684-13.76-164.16l-.105-9.24h-.018V111.61c-14.466-42.988-43.59-70.49-86.172-86.17c-41.74 20.564-81.495 18.426-122.244 0zm-55.145 101.794h45.23l47.284 55h-92.515v-55zm187.3 0h45.23v55h-92.513l47.284-55zM162.378 233.857h.066l34.817 85.883 33.115-81.68 26.914 66.383 27.106-66.857 33.307 82.154 34.47-85.02 16.704 41.206 17.057-42.07h.904c.896 40.145 3.36 80.682 12.676 121.546l-9.707 11.998-31.08-35.582-4.213 79.21-14.725 18.202-37.856-50.257-9.887 78.363c-4.457-1.096-8.92-1.957-13.38-2.596l-21.378-52.726-21.585 53.242c-4.616.744-9.223 1.7-13.816 2.86l-9.443-78.403h-.002l-37.377 49.238.793 2.25-17.92-21.516-4.14-77.866-31.08 35.578-9.92-11.91c11.155-41.838 14.49-81.232 15.47-121.607l17.05 42.046 17.057-42.07z"
      />
    ),
  },
  {
    key: 'trap',
    label: 'Trap Marker',
    kind: 'point',
    defaultColor: '#f87171',
    icon: createIcon(
      '0 0 512 512',
      <path
        fill="currentColor"
        d="M60.406 156.688 24 259.75 203.938 324c-.238-8.905 1.562-18.017 5.625-26.594c7.02-14.822 19.54-25.345 33.906-30.187l-24.44-53.908-19.124 54.125-33-72.718-19.094 54.093-33-72.72-19.968 56.532-34.438-75.938zm399.781 0-34.468 75.937-19.97-56.53-33 72.718-19.094-54.094-33 72.718-19.125-54.125-31.936 70.468a53.44 53.44 0 0 0-6.906-.936c-.462-.018-.915-.03-1.375-.03c-14.28-.007-28.097 8.283-34.875 22.592c-9.33 19.695-1.36 42.64 17.5 51.656c18.86 9.017 41.483.758 50.812-18.937c1.127-2.38 1.99-4.805 2.625-7.25l199.22-71.125-36.408-103.063zM199.78 178.03v18.69h120.595v-18.69H199.78zm50.126 35.345v52.906h18.688v-52.905h-18.688zm10.25 90.563c9.678 0 17.53 7.824 17.53 17.5c.002 9.675-7.854 17.53-17.53 17.53c-9.676 0-17.53-7.853-17.53-17.53c0-9.678 7.852-17.5 17.53-17.5zM99.53 336.967c-50.15 13.628-82.56 33.83-82.56 56.22c0 41.017 106.544 74.343 237.718 74.343c131.173 0 237.687-33.327 237.687-74.342c0-22.313-32.124-42.595-81.97-56.22c17.232 8.878 27.533 19.275 27.533 30.47c0 32.127-82.313 58.53-183.25 58.53c-100.938 0-182.657-26.403-182.657-58.53c0-11.257 10.095-21.56 27.5-30.47z"
      />
    ),
  },
  {
    key: 'object',
    label: 'Object Marker',
    kind: 'point',
    defaultColor: '#38bdf8',
    icon: createIcon(
      '0 0 24 24',
      <path
        d="M2.33496 10.3368C2.02171 10.0471 2.19187 9.52339 2.61557 9.47316L8.61914 8.76107C8.79182 8.74059 8.94181 8.63215 9.01465 8.47425L11.5469 2.98446C11.7256 2.59703 12.2764 2.59695 12.4551 2.98439L14.9873 8.47413C15.0601 8.63204 15.2092 8.74077 15.3818 8.76124L21.3857 9.47316C21.8094 9.52339 21.9791 10.0472 21.6659 10.3369L17.2278 14.4419C17.1001 14.56 17.0433 14.7357 17.0771 14.9063L18.255 20.8359C18.3382 21.2544 17.8928 21.5787 17.5205 21.3703L12.2451 18.4166C12.0934 18.3317 11.9091 18.3321 11.7573 18.417L6.48144 21.3695C6.10913 21.5779 5.66294 21.2544 5.74609 20.8359L6.92414 14.9066C6.95803 14.7361 6.90134 14.5599 6.77367 14.4419L2.33496 10.3368Z"
        fill="none"
        stroke="currentColor"
        strokeWidth={2}
        strokeLinecap="round"
        strokeLinejoin="round"
      />
    ),
  },
  {
    key: 'investigation',
    label: 'Investigation Marker',
    kind: 'point',
    defaultColor: '#a855f7',
    icon: createIcon(
      '0 0 24 24',
      <path
        fill="currentColor"
        d="M10.035 18.069a7.981 7.981 0 0 0 3.938-1.035l3.332 3.332a2.164 2.164 0 0 0 3.061-3.061l-3.332-3.332A8.032 8.032 0 0 0 4.354 4.354a8.034 8.034 0 0 0 5.681 13.715zm-4.267-12.301A6.033 6.033 0 1 1 4 10.035a5.989 5.989 0 0 1 1.768-4.267z"
      />
    ),
  },
  {
    key: 'area',
    label: 'Area Marker',
    kind: 'area',
    defaultColor: '#22c55e',
    icon: createIcon(
      '0 0 360 360',
      <path
        fill="currentColor"
        d="M165.797 288.71c-16.89 0-23.974-15.545-26.301-20.652c-1.919-4.214-4.4-6.728-6.637-6.728c-1.343 0-2.797.826-3.621 2.059c-10.602 15.854-29.265 25.322-49.922 25.322c-34.197 0-62.021-27.887-62.021-62.166c0-21.166 8.271-38.889 22.124-47.404c3.865-2.381 5.826-4.702 5.826-6.9c0-2.814-3.012-4.884-5.989-5.476C15.409 162.026 0 144.645 0 122.485c0-24.713 20.065-44.82 44.729-44.82c11.259 0 22.653 4.772 30.479 12.766c3.585 3.661 7.638 5.365 12.756 5.365c8.769 0 16.306-6.502 16.459-14.196c.047-2.183-.073-9.916-.124-12.712c0-.063-.002-.124-.002-.185c0-33.875 27.013-60.413 61.499-60.413c34.199 0 62.024 27.887 62.024 62.166c0 14.94-7.221 31.259-12.493 43.174l-.237.537c-3.781 8.552-3.697 16.272.246 22.327c4.468 6.86 13.725 11.124 24.159 11.124c1.115 0 2.254-.048 3.384-.143c2.557-.215 7.247-.388 9.649-.428c.243-.004.471-.006.7-.006c24.135 0 43.77 20.104 43.77 44.818c0 24.714-20.065 44.82-44.729 44.82c-12.84 0-22.554-6.859-30.36-12.371c-.97-.685-1.936-1.366-2.905-2.034c-4.171-2.877-7.974-4.159-12.333-4.159c-4.903 0-9.571 2.035-13.147 5.728c-3.759 3.884-5.732 9.02-5.557 14.46c.102 3.117.82 5.201 1.91 8.355c1.066 3.087 2.392 6.927 3.264 12.284c1.13 6.959-.928 13.939-5.793 19.656c-4.964 5.717-13.022 9.497-21.131 9.497zm-32.938-47.653c10.559 0 19.702 6.778 25.084 18.596c4.004 8.785 6.701 8.785 7.854 8.785c2.142 0 4.599-1.195 6.113-2.975c.55-.647 1.44-1.931 1.222-3.269c-.591-3.637-1.477-6.201-2.414-8.916c-1.317-3.814-2.812-8.137-3.012-14.318c-.355-10.979 3.642-21.355 11.255-29.217c7.319-7.563 17.421-11.899 27.712-11.899c8.487 0 16.285 2.532 23.837 7.739c1.029.709 2.061 1.436 3.094 2.166c6.58 4.646 12.264 8.658 18.668 8.658c13.484 0 24.456-11.011 24.456-24.547c0-13.534-10.541-24.547-23.498-24.547l-.364.004c-2.324.04-6.461.206-8.29.359c-1.692.142-3.401.213-5.079.213c-17.474 0-32.855-7.6-41.145-20.331c-7.756-11.908-8.395-26.679-1.8-41.591l.237-.541c4.543-10.262 10.761-24.316 10.761-34.971c0-23.1-18.73-41.893-41.752-41.893c-23.473 0-41.181 17.214-41.227 40.053c.025 1.451.185 10.525.121 13.406c-.373 18.766-16.85 34.047-36.727 34.047c-10.633 0-19.798-3.854-27.24-11.454c-3.972-4.057-10.25-6.677-15.995-6.677c-13.485 0-24.457 11.012-24.457 24.547c0 12.422 8.573 21.542 22.935 24.395c13.139 2.611 22.313 13.039 22.313 25.359c0 6.678-2.686 16.292-15.477 24.166c-9.2 5.656-12.476 19.276-12.476 30.139c0 23.1 18.729 41.894 41.749 41.894c13.875 0 26.239-6.103 33.074-16.325c5.056-7.465 12.897-11.698 20.956-11.698z"
      />
    ),
  },
];

export const mapMarkerIconsByKey: Record<MapMarkerIconKey, MapMarkerIconDefinition> = mapMarkerIconDefinitions.reduce(
  (acc, definition) => {
    acc[definition.key] = definition;
    return acc;
  },
  {} as Record<MapMarkerIconKey, MapMarkerIconDefinition>,
);

export const getMapMarkerIconDefinition = (key: string | null | undefined) => {
  if (!key) {
    return undefined;
  }
  return mapMarkerIconsByKey[key as MapMarkerIconKey];
};

